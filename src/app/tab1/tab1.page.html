<ion-header>
  <ion-toolbar style="--background: #b71c1c;">
    <ion-title style="color: white; font-weight: bold;">ркЖрк╢рк┐рк╖ ркорк╛ркХрк╛ркгрлА - ркжрк╛ркбрко ркбрк╛ркпрк░рлА</ion-title>
    <ion-buttons slot="end">
      <ion-icon name="logo-whatsapp" style="color: white; font-size: 28px; margin-right: 15px;" (click)="shareWhatsApp()"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div style="background: #fff3e0; padding: 15px; border-radius: 15px; border: 2px solid #ff9800; margin-bottom: 15px;">
    <ion-label style="color: #e65100; font-weight: bold;">ркдрк╛рк░рлАркЦ</ion-label>
    <ion-input type="date" [(ngModel)]="currentDate" style="font-size: 18px;"></ion-input>
    
    <ion-item lines="none" style="--background: transparent; margin-top: 10px;">
      <ion-icon name="person" slot="start"></ion-icon>
      <ion-input type="text" [(ngModel)]="driverName" placeholder="ркЧрк╛ркбрлА ркорк╛рк▓рк┐ркХркирлБркВ ркирк╛рко"></ion-input>
    </ion-item>

    <ion-item lines="none" style="--background: #ffffff; margin-top: 10px; border: 1px solid #ff9800; border-radius: 8px;">
      <ion-label style="font-weight: bold;">ркЧрлНрк░рлЗркбрк┐ркВркЧ:</ion-label>
      <select [(ngModel)]="gradingMode" style="border: none; background: transparent; font-size: 16px; width: 100%;">
        <option value="mandi">ЁЯПв ркоркВркбрлА ркЧрлНрк░рлЗркбрк┐ркВркЧ (ркЦрк░рлНркЪ тВ╣13)</option>
        <option value="khedut">ЁЯСитАНЁЯМ╛ ркЦрлЗркбрлВркд ркЧрлНрк░рлЗркбрк┐ркВркЧ (рклрлНрк░рлА)</option>
      </select>
    </ion-item>

    <ion-row>
      <ion-col size="6">
        <ion-label style="font-size: 13px; font-weight: bold;">рк▓рлЛркб ркХрлЗрк░рлЗркЯ</ion-label>
        <ion-input type="number" [(ngModel)]="loadedCrates" placeholder="0" style="border: 1px solid #ff9800; border-radius: 8px; background: white;"></ion-input>
      </ion-col>
      <ion-col size="6">
        <ion-label style="font-size: 13px; font-weight: bold;">ркнрк╛ркбрк╛ ркнрк╛рк╡</ion-label>
        <ion-input type="number" [(ngModel)]="transRate" placeholder="0" style="border: 1px solid #ff9800; border-radius: 8px; background: white;"></ion-input>
      </ion-col>
    </ion-row>
  </div>

  <h6 style="color: #b71c1c; font-weight: bold;">ЁЯУК ркорк╛рк▓ркирлА рк╡рк┐ркЧркд (рк╡ркЬрки ркЕркирлЗ ркнрк╛рк╡)</h6>
  <div *ngFor="let row of rows; let i = index" style="display: flex; gap: 5px; margin-bottom: 8px;">
    <div style="width: 20px; color: #b71c1c; font-weight: bold; padding-top: 10px;">{{i+1}}</div>
    <ion-input type="number" [(ngModel)]="entryRows[i].w" placeholder="рк╡ркЬрки" style="border: 1px solid #ccc; border-radius: 5px; background: white;"></ion-input>
    <ion-input type="number" [(ngModel)]="entryRows[i].p" placeholder="ркнрк╛рк╡" style="border: 1px solid #ccc; border-radius: 5px; background: white;"></ion-input>
    <select [(ngModel)]="entryRows[i].t" style="border: 1px solid #ccc; border-radius: 5px; background: white; width: 80px;">
      <option value="20">20kg</option>
      <option value="1">1kg</option>
    </select>
  </div>

  <ion-row style="margin-top: 20px;">
    <ion-col size="6">
      <ion-button expand="block" (click)="saveData()" style="--background: #0277bd; font-weight: bold; height: 60px;">
        ЁЯТ╛ рк╣рк┐рк╕рк╛ркм рк╕рлЗрк╡<br>ркХрк░рлЛ
      </ion-button>
    </ion-col>
    <ion-col size="6">
      <ion-button expand="block" (click)="shareWhatsApp()" style="--background: #4caf50; font-weight: bold; height: 60px;">
        ЁЯУ▓ WhatsApp<br>рк╢рлЗрк░
      </ion-button>
    </ion-col>
  </ion-row>

  <ion-button expand="block" fill="outline" color="dark" (click)="resetForNewYear()" style="margin-top: 10px;">
    ЁЯЖХ ркирк╡рк╛ рк╡рк░рлНрк╖ркирлЛ рк╣рк┐рк╕рк╛ркм
  </ion-button>

  <h3 style="text-align: center; color: #b71c1c; margin-top: 30px;">ЁЯУЕ рк╕рлАркЭрки ркЗркдрк┐рк╣рк╛рк╕</h3>
  <ion-card *ngFor="let item of history" style="border-radius: 15px; border-left: 10px solid #b71c1c; margin-bottom: 15px;">
    <ion-card-content>
      <div style="display: flex; justify-content: space-between;">
        <span>ЁЯУЕ <b>{{item.date}}</b></span>
        <ion-badge color="primary">{{item.gradingType}}</ion-badge>
        <ion-badge color="danger">ркмрк╛ркХрлА</ion-badge>
      </div>
      <p style="margin: 10px 0; font-size: 15px;">ЁЯСд <b>ркЧрк╛ркбрлА:</b> {{item.driver}} | тЪЦя╕П {{item.totalW}} kg</p>
      <p style="font-size: 18px; color: #b71c1c; font-weight: bold; border-top: 1px solid #eee; padding-top: 8px;">
        ЁЯТ╡ ркЪрлЛркЦрлНркЦрлА ркЖрк╡ркХ: тВ╣{{item.net}}
      </p>
      <ion-button size="small" fill="clear" color="danger" (click)="deleteData(item.id)">ркбрк┐рк▓рлАркЯ</ion-button>
    </ion-card-content>
  </ion-card>
</ion-content>
