<ion-header>
  <ion-toolbar color="danger">
    <ion-title>ркЖрк╢рк┐рк╖ ркорк╛ркХрк╛ркгрлА - ркжрк╛ркбрко ркбрк╛ркпрк░рлА</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="shareWhatsApp()"><ion-icon name="logo-whatsapp"></ion-icon></ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div style="background: #fff3e0; padding: 15px; border-radius: 15px; border: 2px solid #ff9800; margin-bottom: 20px;">
    <ion-item lines="none" style="--background: transparent;">
      <ion-label position="floating">ркдрк╛рк░рлАркЦ</ion-label>
      <ion-input type="date" [(ngModel)]="currentDate"></ion-input>
    </ion-item>
    <ion-item lines="none" style="--background: transparent;">
      <ion-input type="text" [(ngModel)]="driverName" placeholder="ЁЯСд ркЧрк╛ркбрлА ркорк╛рк▓рк┐ркХркирлБркВ ркирк╛рко"></ion-input>
    </ion-item>
    <ion-row>
      <ion-col size="6"><ion-input type="number" [(ngModel)]="loadedCrates" placeholder="ЁЯУж рк▓рлЛркб ркХрлЗрк░рлЗркЯ"></ion-input></ion-col>
      <ion-col size="6"><ion-input type="number" [(ngModel)]="transRate" placeholder="тВ╣ ркнрк╛ркбрк╛ ркнрк╛рк╡"></ion-input></ion-col>
    </ion-row>
  </div>

  <ion-list-header><ion-label color="primary">ЁЯУК ркорк╛рк▓ркирлА рк╡рк┐ркЧркд (рк╡ркЬрки ркЕркирлЗ ркнрк╛рк╡)</ion-label></ion-list-header>
  <div *ngFor="let row of rows; let i = index" style="display: flex; gap: 5px; margin-bottom: 5px; align-items: center;">
    <div style="width: 25px; font-weight: bold; color: #b71c1c;">{{i+1}}</div>
    <ion-input type="number" [(ngModel)]="entryRows[i].w" placeholder="рк╡ркЬрки" style="border: 1px solid #ccc; border-radius: 5px; text-align: center;"></ion-input>
    <ion-input type="number" [(ngModel)]="entryRows[i].p" placeholder="ркнрк╛рк╡" style="border: 1px solid #ccc; border-radius: 5px; text-align: center;"></ion-input>
    <select [(ngModel)]="entryRows[i].t" style="border: 1px solid #ccc; border-radius: 5px; height: 38px;">
      <option value="20">20kg</option>
      <option value="1">1kg</option>
    </select>
  </div>

  <ion-button expand="block" color="success" (click)="saveData()" style="margin-top: 20px;">ЁЯТ╛ рк╣рк┐рк╕рк╛ркм рк╕рлЗрк╡ ркХрк░рлЛ</ion-button>
  <ion-button expand="block" fill="outline" color="dark" (click)="resetForNewYear()">ЁЯЖХ ркирк╡рк╛ рк╡рк░рлНрк╖ркирлЛ рк╣рк┐рк╕рк╛ркм (Clear All)</ion-button>

  <h3 style="text-align: center; color: #b71c1c; margin-top: 30px;">ЁЯУЕ рк╕рлАркЭрки ркЗркдрк┐рк╣рк╛рк╕</h3>
  <ion-card *ngFor="let item of history" style="border-left: 8px solid #b71c1c; margin-bottom: 10px;">
    <ion-card-content>
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <b>ЁЯУЕ {{item.date}}</b>
        <ion-badge color="danger">ркмрк╛ркХрлА</ion-badge>
      </div>
      <p style="margin: 5px 0;">ЁЯСд {{item.driver}} | ЁЯУж {{item.lc}} ркХрлЗрк░рлЗркЯ</p>
      <p style="font-size: 16px; color: #1b5e20;"><b>ЁЯТ╡ ркЪрлЛркЦрлНркЦрлА ркЖрк╡ркХ: тВ╣{{item.net}}</b></p>
      <div style="text-align: right;">
        <ion-button size="small" fill="clear" color="danger" (click)="deleteData(item.id)">
          <ion-icon name="trash-outline" slot="start"></ion-icon> ркбрк┐рк▓рлАркЯ
        </ion-button>
      </div>
    </ion-card-content>
  </ion-card>
</ion-content>
