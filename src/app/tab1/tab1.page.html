<ion-header>
  <ion-toolbar style="--background: #b71c1c;">
    <ion-title style="color: white; font-weight: bold;">ркЖрк╢рк┐рк╖ ркорк╛ркХрк╛ркгрлА - ркжрк╛ркбрко ркбрк╛ркпрк░рлА</ion-title>
    <ion-buttons slot="end">
      <ion-icon name="logo-whatsapp" style="color: white; font-size: 28px; margin-right: 15px;" (click)="shareWhatsApp()"></ion-icon>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div style="background: #fff3e0; padding: 15px; border-radius: 15px; border: 2px solid #ff9800; margin-bottom: 15px;">
    <ion-label style="color: #e65100; font-weight: bold;">ркдрк╛рк░рлАркЦ</ion-label>
    <ion-input type="date" [(ngModel)]="currentDate" style="font-size: 18px;"></ion-input>
    
    <ion-item lines="none" style="--background: transparent; margin-top: 10px;">
      <ion-icon name="person" slot="start"></ion-icon>
      <ion-input type="text" [(ngModel)]="driverName" placeholder="ркЧрк╛ркбрлА ркорк╛рк▓рк┐ркХркирлБркВ ркирк╛рко"></ion-input>
    </ion-item>

    <ion-item lines="none" style="--background: transparent; border-top: 1px dashed #ff9800;">
      <ion-icon name="business" slot="start"></ion-icon>
      <ion-input type="text" [(ngModel)]="mandiName" placeholder="ркоркВркбрлАркирлБркВ ркирк╛рко"></ion-input>
    </ion-item>

    <ion-item lines="none" style="--background: #ffffff; margin-top: 10px; border: 1px solid #ff9800; border-radius: 8px;">
      <ion-label style="font-weight: bold;">ркЧрлНрк░рлЗркбрк┐ркВркЧ:</ion-label>
      <select [(ngModel)]="gradingMode" style="border: none; background: transparent; font-size: 16px; width: 100%;">
        <option value="mandi">ЁЯПв ркоркВркбрлА ркЧрлНрк░рлЗркбрк┐ркВркЧ (ркЦрк░рлНркЪ тВ╣13)</option>
        <option value="khedut">ЁЯСитАНЁЯМ╛ ркЦрлЗркбрлВркд ркЧрлНрк░рлЗркбрк┐ркВркЧ (рклрлНрк░рлА)</option>
      </select>
    </ion-item>

    <ion-row>
      <ion-col size="6">
        <ion-label style="font-size: 13px; font-weight: bold;">рк▓рлЛркб ркХрлЗрк░рлЗркЯ</ion-label>
        <ion-input type="number" [(ngModel)]="loadedCrates" placeholder="0" style="border: 1px solid #ff9800; border-radius: 8px; background: white;"></ion-input>
      </ion-col>
      <ion-col size="6">
        <ion-label style="font-size: 13px; font-weight: bold;">ркнрк╛ркбрк╛ ркнрк╛рк╡</ion-label>
        <ion-input type="number" [(ngModel)]="transRate" placeholder="0" style="border: 1px solid #ff9800; border-radius: 8px; background: white;"></ion-input>
      </ion-col>
    </ion-row>
  </div>

  <h6 style="color: #b71c1c; font-weight: bold;">ЁЯУК ркорк╛рк▓ркирлА рк╡рк┐ркЧркд (рк╡ркЬрки ркЕркирлЗ ркнрк╛рк╡)</h6>
  <div *ngFor="let row of entryRows; let i = index" style="display: flex; gap: 5px; margin-bottom: 8px;">
    <div style="width: 20px; color: #b71c1c; font-weight: bold; padding-top: 10px;">{{i+1}}</div>
    <ion-input type="number" [(ngModel)]="row.w" placeholder="рк╡ркЬрки" style="border: 1px solid #ccc; border-radius: 5px; background: white;"></ion-input>
    <ion-input type="number" [(ngModel)]="row.p" placeholder="ркнрк╛рк╡" style="border: 1px solid #ccc; border-radius: 5px; background: white;"></ion-input>
    <select [(ngModel)]="row.t" style="border: 1px solid #ccc; border-radius: 5px; background: white; width: 80px;">
      <option value="20">20kg</option>
      <option value="1">1kg</option>
    </select>
  </div>

  <ion-button expand="block" (click)="calculateBill()" style="--background: #1b5e20; font-weight: bold; margin-top: 15px;">
    ЁЯзо рк╣рк┐рк╕рк╛ркм ркЧркгрлЛ
  </ion-button>

  <div *ngIf="showSummary" style="margin-top: 20px; padding: 15px; border: 2px solid #1b5e20; border-radius: 15px; background: #f1f8e9;">
    <h5 style="text-align: center; color: #1b5e20; font-weight: bold;">ЁЯУЛ рк╣рк┐рк╕рк╛ркмркирлА рк╡рк┐ркЧркд</h5>
    <p>ркХрлБрк▓ рк╡ркЬрки: <b>{{totalWeight}} kg</b></p>
    <p>ркХрлБрк▓ рк╡рлЗркЪрк╛ркг: <b>тВ╣{{totalSales}}</b></p>
    <p>ркЦрк░рлНркЪ (ркЧрлНрк░рлЗркбрк┐ркВркЧ + ркнрк╛ркбрлБркВ): <b>тВ╣{{totalExpense}}</b></p>
    <p>ркоркВркбрлА ркЪрк╛рк░рлНркЬ (3%): <b>тВ╣{{mandiCharge}}</b></p>
    
    <div style="background: #2e7d32; color: white; padding: 10px; border-radius: 8px; margin-top: 10px; text-align: center;">
      <h6 style="margin: 0;">ркЪрлЛркЦрлНркЦрлА ркЖрк╡ркХ: тВ╣{{netIncome}}</h6>
    </div>
    
    <div style="background: #4caf50; color: white; padding: 10px; border-radius: 8px; margin-top: 10px; text-align: center;">
      <h6 style="margin: 0;">рк╕рк░рлЗрк░рк╛рк╢: тВ╣{{averageRate}} /kg</h6>
    </div>
  </div>

  <ion-row style="margin-top: 20px;">
    <ion-col size="6">
      <ion-button expand="block" (click)="saveData()" style="--background: #0277bd; font-weight: bold; height: 60px;">
        ЁЯТ╛ рк╣рк┐рк╕рк╛ркм рк╕рлЗрк╡<br>ркХрк░рлЛ
      </ion-button>
    </ion-col>
    <ion-col size="6">
      <ion-button expand="block" (click)="shareWhatsApp()" style="--background: #4caf50; font-weight: bold; height: 60px;">
        ЁЯУ▓ WhatsApp<br>рк╢рлЗрк░
      </ion-button>
    </ion-col>
  </ion-row>

  <h3 style="text-align: center; color: #b71c1c; margin-top: 30px;">ЁЯУЕ рк╕рлАркЭрки ркЗркдрк┐рк╣рк╛рк╕ (ркЯрлЗркм 2)</h3>
  </ion-content>
